<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="ZXing for JS">
    <title>jsqrcode</title>
</head>
<body>
<!-- 비디오 요소를 통해 카메라 화면 표시 -->
<video id="video" autoplay playsinline></video>

<!-- 버튼을 클릭하여 QR 코드 스캔 실행 -->
<button onclick="scanQRCode()">QR 코드 스캔</button>

<script src="https://cdn.jsdelivr.net/npm/jsqrcode@latest"></script>
<script>
    // 브라우저에서 카메라 액세스 권한 요청
    async function requestCameraAccess() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({video: true});
            const videoElement = document.getElementById('video');
            videoElement.srcObject = stream;
        } catch (error) {
            console.error('카메라 액세스를 허용하지 않았습니다.', error);
        }
    }

    // QR 코드 스캔
    async function scanQRCode() {
        const videoElement = document.getElementById('video');

        try {
            const result = await jsQR(videoElement);
            if (result) {
                console.log('스캔 결과:', result.data);
            } else {
                console.log('QR 코드를 찾을 수 없습니다.');
            }
        } catch (error) {
            console.error('QR 코드 스캔 중 오류 발생:', error);
        }
    }

    // 페이지 로드 시 카메라 액세스 요청
    window.addEventListener('DOMContentLoaded', () => {
        requestCameraAccess();
    });
</script>
</body>

</html>
